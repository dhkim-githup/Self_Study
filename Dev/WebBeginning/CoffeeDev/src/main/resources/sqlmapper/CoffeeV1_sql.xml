<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.coffeedev.dao.CoffeV1Dao">

    <!-- 전체조회 Coffee V1 List  [ List , Map ] -->
    <select id="doCoffeList" resultType="map">
        SELECT coffee_id, name, kind, price,
               DATE_FORMAT(reg_day,'%Y.%m.%d') AS reg_day, DATE_FORMAT(mod_day,'%Y.%m.%d') AS mod_day
        FROM coffee
        ORDER BY kind, price
    </select>

    <!-- 1 row 조회  -->
    <select id="doListOne" resultType="map">
        SELECT coffee_id, name, kind, price,
               DATE_FORMAT(reg_day,'%Y.%m.%d') AS reg_day, DATE_FORMAT(mod_day,'%Y.%m.%d') AS mod_day
        FROM coffee
        WHERE coffee_id = CAST(#{strCoffee_id} as INTEGER)
    </select>

    <!-- 커피메뉴 등록하기 , 파라메터는 자동으로 인식됨 , 가격은 숫자로 변환 -->
    <insert id="doInsert">
        Insert into coffee(name, kind, price)
        Values (#{strName},#{strKind}, CAST(#{strPrice} as INTEGER))
    </insert>


    <!-- 커피메뉴 수정하기 , 파라메터는 자동으로 인식됨 , 가격은 숫자로 변환 -->
    <insert id="doUpdate">
        UPDATE coffee
        SET name=#{strName}, kind=#{strKind}, price=CAST(#{strPrice} as INTEGER)
        WHERE coffee_id = CAST(#{strCoffee_id} as INTEGER)
    </insert>


    <!-- 커피메뉴 삭제 1 row -->
    <insert id="doDelete">
        Delete from  coffee
        WHERE coffee_id = CAST(#{strCoffee_id} as INTEGER)
    </insert>

</mapper>